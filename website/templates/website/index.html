{% extends 'base.html' %}
{% load static %}
{% block content %}

    <div class="bg-white">
        <div class="relative">
            <div class="mx-auto max-w-7xl">
                <div class="relative z-10 pt-14 lg:w-full lg:max-w-2xl">
                    <svg viewBox="0 0 100 100" preserveAspectRatio="none" aria-hidden="true"
                         class="absolute inset-y-0 right-8 hidden h-full w-80 translate-x-1/2 transform fill-white lg:block">
                        <polygon points="0,0 90,0 50,100 0,100"></polygon>
                    </svg>
                    <div class="relative px-6 py-32 sm:py-40 lg:px-8 lg:py-56 lg:pr-0">
                        <div class="mx-auto max-w-2xl lg:mx-0 lg:max-w-xl">
                            <div class="hidden sm:mb-10 sm:flex">
                                <div class="relative rounded-full px-3 py-1 text-sm/6 text-gray-500 ring-1 ring-gray-900/10 hover:ring-gray-900/20">
                                    For Film Reviews, and News from Fort Kent Cinema! <a href="{% url 'website:blog_list' %}"
                                                                                         class="font-semibold whitespace-nowrap text-indigo-600"><span
                                        aria-hidden="true" class="absolute inset-0"></span>Read Our Blog <span
                                        aria-hidden="true">→</span></a></div>
                            </div>
                            <h1 class="text-5xl font-semibold tracking-tight text-pretty text-gray-900 sm:text-7xl">Fort
                                Kent Cinema</h1>
                            <p class="mt-8 text-lg font-medium text-pretty text-gray-500 sm:text-xl/8">Located in the
                                heart of downtown Fort Kent, our cozy two-screen theater combines modern technology with
                                a welcoming atmosphere, perfect for enjoying the latest blockbusters, family favorites,
                                and indie gems. <br><br>Join us and experience the magic of cinema!</p>
                            <div class="mt-10 flex items-center gap-x-6"><a href="#now-playing"
                                                                            class="rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-xs hover:bg-indigo-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">Now
                                Playing</a><a href="{% url 'website:coming_soon' %}" class="text-sm/6 font-semibold text-gray-900">Coming
                                Soon <span aria-hidden="true">→</span></a></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="bg-gray-50 lg:absolute lg:inset-y-0 lg:right-0 lg:w-1/2"><img alt="Old fashion film projector"
                                                                                      class="aspect-3/2 object-cover lg:aspect-auto lg:size-full"
                                                                                      src="{% static 'website/img/projector-background.jpg' %}">
            </div>
        </div>
    </div>

    <div class="bg-gray-900 py-24 sm:py-32" id="now-playing">
        <div class="mx-auto max-w-7xl px-6 lg:px-8">
            <div class="mx-auto max-w-2xl lg:max-w-none">
                <div class="text-center"><h2
                        class="text-4xl font-semibold tracking-tight text-balance text-white sm:text-5xl">Now Playing at
                    Fort Kent Cinema</h2>
                    <p class="mt-4 text-lg/8 text-gray-300">Fort Kent Cinema is a cozy, two-screen theater nestled in
                        the heart of downtown Fort Kent. Each auditorium offers comfortable seating for up to 100
                        guests, creating an intimate and inviting moviegoing experience. Whether you're here for the
                        latest blockbuster or a family-friendly adventure, our modern projection and sound systems
                        ensure you enjoy every moment. Locally owned and operated, we take pride in providing a
                        friendly, welcoming environment for our community to relax, snack, and escape into the world of
                        film.</p></div>
                <dl class="mt-16 grid grid-cols-1 gap-0.5 overflow-hidden rounded-2xl text-center sm:grid-cols-2 lg:grid-cols-2">
                    {% for movie in now_playing %}
                        <div class="flex flex-col bg-white/5 p-8">
                            <dt class="text-sm/6 font-semibold text-gray-300">
                                <img alt="{{ movie.title }} Poster" class="mx-auto mb-4 rounded-lg max-h-75"
                                     src="{{ movie.omdb_json.Poster }}">
                                {% if movie.omdb_json.Rated %}
                                    <p>Rating: {{ movie.omdb_json.Rated }}</p>
                                {% endif %}
                                {% if movie.omdb_json.Runtime %}
                                    <p>Running Time: {{ movie.omdb_json.Runtime }}</p>
                                {% endif %}
                                {% if movie.omdb_json.Genre %}
                                    <p>Genre: {{ movie.omdb_json.Genre }}</p>
                                {% endif %}
                                <div class="flex justify-center items-center space-x-4 mt-4">
                                    {% if movie.youtube_id %}
                                    <a
                                            href="https://www.youtube.com/watch?v={{ movie.youtube_id }}" target="_blank"
                                            rel="noopener noreferrer" aria-label="Watch trailer on YouTube">
                                        <svg stroke="currentColor" fill="currentColor" stroke-width="0"
                                             viewBox="0 0 576 512"
                                             color="#FF0000" height="28" width="28" xmlns="http://www.w3.org/2000/svg"
                                             style="color: rgb(255, 0, 0);">
                                            <path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path>
                                        </svg>
                                    </a>
                                    {% endif %}
                                    {% if movie.imdb_id %}
                                    <a href="https://www.imdb.com/title/{{ movie.imdb_id }}/" target="_blank"
                                           rel="noopener noreferrer" aria-label="View on IMDb">
                                    <svg stroke="currentColor" fill="currentColor" stroke-width="0"
                                         viewBox="0 0 448 512"
                                         color="#FFD700" height="28" width="28" xmlns="http://www.w3.org/2000/svg"
                                         style="color: rgb(255, 215, 0);">
                                        <path d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM21.3 229.2H21c.1-.1.2-.3.3-.4zM97 319.8H64V192h33zm113.2 0h-28.7v-86.4l-11.6 86.4h-20.6l-12.2-84.5v84.5h-29V192h42.8c3.3 19.8 6 39.9 8.7 59.9l7.6-59.9h43zm11.4 0V192h24.6c17.6 0 44.7-1.6 49 20.9 1.7 7.6 1.4 16.3 1.4 24.4 0 88.5 11.1 82.6-75 82.5zm160.9-29.2c0 15.7-2.4 30.9-22.2 30.9-9 0-15.2-3-20.9-9.8l-1.9 8.1h-29.8V192h31.7v41.7c6-6.5 12-9.2 20.9-9.2 21.4 0 22.2 12.8 22.2 30.1zM265 229.9c0-9.7 1.6-16-10.3-16v83.7c12.2.3 10.3-8.7 10.3-18.4zm85.5 26.1c0-5.4 1.1-12.7-6.2-12.7-6 0-4.9 8.9-4.9 12.7 0 .6-1.1 39.6 1.1 44.7.8 1.6 2.2 2.4 3.8 2.4 7.8 0 6.2-9 6.2-14.4z"></path>
                                    </svg>
                                    </a>
                                    {% endif %}
                                </div>
                            </dt>
                            <dd class="order-first text-3xl font-semibold tracking-tight text-white mb-5">{{ movie.title }}<br/>
                                <small>{{ movie.bookings.last.booking_start_date|date:"F j" }} - {{ movie.bookings.last.booking_end_date|date:"F j" }}</small>
                            </dd>
                        {% if movie.bookings.last.ticket_link %}
                        <a href="{{ movie.bookings.last.ticket_link }}" class="mt-5 px-4 py-2 rounded transition-colors duration-200 bg-blue-600 hover:bg-blue-700 text-white">Purchase Tickets</a>
                        {% endif %}
                        </div>

                    {% endfor %}
                </dl>

                {% if not now_playing %}
                    <div class="flex flex-col bg-white/5 p-8 m-auto text-center">
                        <dt class="text-sm/6 font-semibold text-gray-300">No movies are currently playing.</dt>
                        <dd class="order-first text-3xl font-semibold tracking-tight text-white mb-5">Check back soon!
                        </dd>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>

    <section class="py-8 flex justify-center flex-col items-center">
        <div class="flex flex-col">
            <div class="text-center text-sm text-gray-500 mb-2">Select a day to view showtimes.</div>
            <div class="flex space-x-2 mb-4 justify-center">
                {% comment %} <button class="px-4 py-2 rounded transition-colors duration-200 bg-blue-600 hover:bg-blue-700 text-white">
                    <span class="hidden sm:inline">Monday</span><span class="sm:hidden">Mon</span>
                </button>
                <button class="px-4 py-2 rounded transition-colors duration-200 bg-blue-600 hover:bg-blue-700 text-white">
                    <span class="hidden sm:inline">Tuesday</span><span class="sm:hidden">Tue</span>
                </button>
                <button class="px-4 py-2 rounded transition-colors duration-200 bg-blue-600 hover:bg-blue-700 text-white">
                    <span class="hidden sm:inline">Wednesday</span><span class="sm:hidden">Wed</span>
                </button>
                {% endcomment %}
                <button class="px-4 py-2 rounded transition-colors duration-200 bg-blue-600 hover:bg-blue-700 text-white">
                    <span class="hidden sm:inline">Thursday</span><span class="sm:hidden">Thu</span>
                </button>
                <button class="px-4 py-2 rounded transition-colors duration-200 bg-blue-600 hover:bg-blue-700 text-white">
                    <span class="hidden sm:inline">Friday</span><span class="sm:hidden">Fri</span>
                </button>
                <button class="px-4 py-2 rounded transition-colors duration-200 bg-blue-600 hover:bg-blue-700 text-white">
                    <span class="hidden sm:inline">Saturday</span><span class="sm:hidden">Sat</span>
                </button>
                <button class="px-4 py-2 rounded transition-colors duration-200 bg-blue-600 hover:bg-blue-700 text-white">
                    <span class="hidden sm:inline">Sunday</span><span class="sm:hidden">Sun</span>
                </button>
            </div>

            <div class="flex flex-col justify-center items-center">
                {% comment %} <ul id="mon-times" class="space-y-2 flex flex-col items-center justify-center">
                    <li class="text-2xl font-extrabold text-center">Showtimes for Monday</li>
                    <li class="text-lg text-center">Despicable Me - 11:00 AM</li>
                    <li class="text-lg text-center">Despicable Me 2 - 2:00 PM</li>
                </ul>
                <ul id="tue-times" class="space-y-2 flex flex-col items-center justify-center">
                    <li class="text-2xl font-extrabold text-center">Showtimes for Tuesday</li>
                    <li class="text-lg text-center">Despicable Me 3 - 11:00 AM</li>
                    <li class="text-lg text-center">Despicable Me 4 - 2:00 PM</li>
                    <li class="text-lg text-center">Downton Abbey: The Grande Finale - 4:00 PM</li>
                   <li class="text-lg text-center">The Senior - 4:00 PM</li>
                </ul>
                <ul id="wed-times" class="space-y-2 flex flex-col items-center justify-center">
                    <li class="text-2xl font-extrabold text-center">Showtimes for Wednesday</li>
                    <li class="text-lg text-center">Minions - 11:00 AM</li>
                    <li class="text-lg text-center">Minions: The Rise of Gru - 2:00 PM</li>
                    <li class="text-lg text-center">Downton Abbey: The Grande Finale - 4:00 PM</li>
                   <li class="text-lg text-center">The Senior - 4:00 PM</li>
                </ul>
                 {% endcomment %}
                <ul id="thu-times" class="space-y-2 flex flex-col items-center justify-center">
                    <li class="text-2xl font-extrabold text-center">Showtimes for Thursday</li>
                    <li class="text-lg text-center">Roofman - 7:30 PM</li>
                    <li class="text-lg text-center">Tron: Ares - 7:30 PM</li>
                </ul>
                <ul id="fri-times" class="space-y-2 flex flex-col items-center justify-center">
                    <li class="text-2xl font-extrabold text-center">Showtimes for Friday</li>
                    <li class="text-lg text-center">Casper - 6:00 PM & 9:00 PM</li>
                    <li class="text-lg text-center">Regretting You - 6:00 PM & 9:00 PM</li>
                </ul>
                <ul id="sat-times" class="space-y-2 flex flex-col items-center justify-center">
                    <li class="text-2xl font-extrabold text-center">Showtimes for Saturday</li>
                    <li class="text-lg text-center">Casper - 3:00 PM & 9:00 PM</li>
                    <li class="text-lg text-center">Regretting You 3:00 PM & 9:00 PM</li>
                    <li class="text-lg text-center font-extrabold">The Rocky Horror Picture Show 7:00 PM</li>
                </ul>
                <ul id="sun-times" class="space-y-2 flex flex-col items-center justify-center">
                    <li class="text-2xl font-extrabold text-center">Showtimes for Sunday</li>
                    <li class="text-lg text-center">Casper - 3:00 PM, 5:00 PM, 7:00 PM</li>
                    <li class="text-lg text-center">Regretting You - 3:00 PM, 6:00 PM</li>
                </ul>
            </div>
            <div class="mt-4 text-center text-xs text-gray-400">Closed Monday - Wednesday</div>
        </div>
    </section>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Map days to IDs
            const dayMap = {
                0: "sun-times", // Sunday
                1: "mon-times", // Monday
                2: "tue-times", // Tuesday
                3: "wed-times",
                4: "thu-times",
                5: "fri-times",
                6: "sat-times",
            };

            const lists = document.querySelectorAll("ul[id$='-times']");
            const buttons = document.querySelectorAll("button");

            // Helper to hide all lists
            function hideAll() {
                lists.forEach((list) => (list.style.display = "none"));
                buttons.forEach((btn) => btn.classList.remove("ring", "ring-yellow-400"));
            }

            // Show one list by id
            function showList(id, button) {
                hideAll();
                const list = document.getElementById(id);
                if (list) list.style.display = "block";
                if (button) button.classList.add("ring", "ring-yellow-400");
            }

            // Initialize: show today's list if available
            const today = new Date().getDay(); // 0 = Sunday, 1 = Monday, ...
            if (dayMap[today]) {
                const id = dayMap[today];
                const button = Array.from(buttons).find((btn) =>
                    btn.textContent.toLowerCase().includes(id.split("-")[0])
                );
                showList(id, button);
            } else {
                hideAll(); // closed Mon- Thursday
            }

            // Add click events
            buttons.forEach((btn) => {
                btn.addEventListener("click", () => {
                    const label = btn.textContent.toLowerCase();
                    if (label.includes("mon")) showList("mon-times", btn);
                    if (label.includes("tue")) showList("tue-times", btn);
                    if (label.includes("wed")) showList("wed-times", btn);
                    if (label.includes("thu")) showList("thu-times", btn);
                    if (label.includes("fri")) showList("fri-times", btn);
                    if (label.includes("sat")) showList("sat-times", btn);
                    if (label.includes("sun")) showList("sun-times", btn);
                });
            });
        });
    </script>



    <section class="py-8">
        <div class="flex justify-center flex-wrap">
            <div class="bg-white rounded-lg shadow p-6 flex flex-col flex-grow-1 mx-4 min-w-[320px] max-w-[600px]"><h3
                    class="text-lg font-bold mb-2 text-red-700">Ticket Rates</h3>
                <ul class="space-y-2 b">
                    <li class="flex justify-between items-center px-2 py-1 bg-gray-50 rounded"><span
                            class="font-medium">General Admission</span><span class="text-right text-gray-700">$8.00</span></li>
                    <li class="flex justify-between items-center px-2 py-1 bg-gray-50 rounded"><span
                            class="font-medium">Matinée/Discount Night</span><span class="text-right text-gray-700">$6.00</span>
                    </li>
                </ul>
            </div>
            <div class="bg-white rounded-lg shadow p-6 flex flex-col flex-grow-1 mx-4 min-w-[320px] max-w-[600px]"><h3
                    class="text-lg font-bold mb-2 text-red-700">Popcorn Rates</h3>
                <ul class="space-y-2 b">
                    <li class="flex justify-between items-center px-2 py-1 bg-gray-50 rounded"><span
                            class="font-medium">Small</span><span class="text-right text-gray-700">$4.25</span></li>
                    <li class="flex justify-between items-center px-2 py-1 bg-gray-50 rounded"><span
                            class="font-medium">Medium</span><span class="text-right text-gray-700">$5.50</span></li>
                    <li class="flex justify-between items-center px-2 py-1 bg-gray-50 rounded"><span
                            class="font-medium">Large</span><span class="text-right text-gray-700">$6.75</span></li>
                    <li class="flex justify-between items-center px-2 py-1 bg-gray-50 rounded"><span
                            class="font-medium">Jumbo</span><span class="text-right text-gray-700">$8.50</span></li>
                    <li class="flex justify-between items-center px-2 py-1 bg-gray-50 rounded"><span
                            class="font-medium">Big Ol Bag</span><span class="text-right text-gray-700">$10.00</span>
                    </li>
                </ul>
            </div>
        </div>
    </section>

{% endblock content %}
